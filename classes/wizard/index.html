
<!DOCTYPE html>
<html lang="tw">
  <head>
  <title>法師 | 地城世界 HTML SRD</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/css/sticky-footer.css" rel="stylesheet">
    <link href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/css/site.css" rel="stylesheet">

    
    
    
  </head>
  <body data-spy="scroll" data-target="#sidemenu">
  
<nav id="site-nav" class="navbar navbar-default navbar-fixed-top" role="navigation">
 
<div class="navbar-header">
 <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
   <span class="sr-only">Toggle navigation</span>
   <span class="icon-bar"></span>
   <span class="icon-bar"></span>
   <span class="icon-bar"></span>
 </button>
 <a class="navbar-brand" href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release">地城世界 HTML SRD</a>
</div>


<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
 <ul class="nav navbar-nav">
   <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown">本遊戲 <b class="caret"></b></a>
     <ul class="dropdown-menu">
       <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/introduction">簡介</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/playing_the_game">進行遊戲</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/example">遊玩範例</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/character_creation">角色創造</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/moves">動作</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/equipment">裝備與服務</a></li>
       <li class="divider"></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/moves_discussion">討論 - 動作</a></li>
     </ul>
   </li>
   <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown">職業 <b class="caret"></b></a>
     <ul class="dropdown-menu">
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/barbarian">野蠻人</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/bard">吟遊詩人</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/cleric">牧師</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/druid">德魯伊</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/fighter">戰士</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/immolator">燔祭者</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/paladin">聖武士</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/ranger">遊俠</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/thief">盜賊</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/wizard">法師</a></li>
       <li class="divider"></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/cleric/spells">牧師法術</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/wizard/spells">法師法術</a></li>
       <li class="divider"></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/classes/class_moves_discussion">討論 - 職業動作</a></li>
     </ul>
   </li>
   <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown">GM章節 <b class="caret"></b></a>
     <ul class="dropdown-menu">
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/gm/basics">基本</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/gm/first_session">第一次聚會</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/gm/fronts">前置</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/gm/the_world">世界</a></li>
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/gm/advanced_delving">深入鑽研</a></li>
     </ul>
   </li>
   <li class="dropdown">
     <a href="#" class="dropdown-toggle" data-toggle="dropdown">怪物 <b class="caret"></b></a>
     <ul class="dropdown-menu">
        <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/overview">總覽</a></li>
       <li class="divider"></li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/caverns">洞穴居族</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/folk">王國住民</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/woods">幽暗森林</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/undead">不死軍團</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/depths">下界深淵</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/planes">位面勢力</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/hordes">貪掠團夥</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/swamp">沼澤棲物</a> </li>
         <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/monsters/experiments">扭曲實驗體</a> </li>
     </ul>
     <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">附錄 <b class="caret"></b></a>
        <ul class="dropdown-menu">
           <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/appendices/conversion">冒險模組轉換</a></li>
           <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/appendices/teaching">遊戲教學</a></li>
           <li><a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/appendices/npcs">速成NPC</a></li>
        </ul>
     </li>
   </li>
 </ul>
 
</div>
</nav>

  <nav id="sidemenu" class="col-md-2">
   <ul id="sidemenu-topnav" class="nav">
   </ul>
</nav>

  <div id="wrap">
    <div class="container">
      <div class="col-md-8 inner-container">
        

<h1>法師</h1>
<div id="intro"><p class="NoIndent">地城世界有它的規則。不是凡人的法律也不是可悲暴君的規矩，而是更偉大、更完善的規則－－放開手東西就會落下、無中不能生有、死者不能復生，對吧？</p>
<p>對，那些人們用來在漫漫長夜裡讓自己好過一點的規則。</p>
<p>你竭盡人生鑽研厚重的典籍，重複讓你瀕臨瘋狂的實驗，召喚能危害你性命的存在。這都是為了什麼？當然是為了力量，不然呢？你要的不是王室或國家的權力，而是可以煮沸人血的法力。你會用它呼喚蒼穹中的霹靂，震撼翻騰的大地，將這世界珍視的無聊規則棄如敝履。</p>
<p>庸人愛看就讓他們看，隨他們愛叫你「魔道士」還是「惡魔信徒」。難道他們的目光還會化為火球？</p>
<p>呵，最好是會。</p></div>
<hr/>
<h2>名稱</h2>
<div id="names"><p class="NoIndent"><b>精靈</b>: 格拉狄爾(Galadiir), 芬法里爾(Fenfaril), 莉莉雅斯翠(Lilliastre), 菲羅薩雷(Phirosalle), 安奇拉許(Enkirash), 哈維爾(Halwyr)</p> 
<p class="NoIndent"><b>人類</b>: 亞文(Avon), 摩根(Morgan), 拉瑟(Rath), 伊索德(Ysolde), 奧維德(Ovid), 維特(Vitus), 愛爾達拉(Aldara), 席諾(Xeno), 烏里(Uri)</p></div>
<hr/>
<h2>外觀</h2>
<div id="look"><p class="InstructionsAfterHeader">從每列中各自選擇一項：</p>
<ul><li>著魔的眼神, 銳利的眼神, 或 瘋狂的眼神</li>
<li>時尚的髮型, 狂亂的髮型, 或 巫師尖帽</li>
<li>老舊長袍, 漂亮長袍, 或 古怪長袍</li>
<li>矮胖的體型, 詭異的體型, 或 消瘦的體型</li></ul></div>
<hr/>
<h2>屬性數值</h2>
<p class="NoIndent">你的最大生命值為 4+體質值。</p>
<p class="NoIndent">你的基礎傷害骰為 <span id="Damage">d4</span>。</p>
<p class="NoIndent">將以下數值分配到你的屬性上: 16 (+2), 15 (+1), 13 (+1), 12 (+0), 9 (+0), 8 (-1)</p>
<hr/>
<h2>起始動作</h2>
<div id="startingmoves"><p class="InstructionsAfterHeader">選擇一個種族並獲得相應的動作：</p>
<div id="racialmoves"><div class="Move"><h3 class="MoveName">精靈</h3>
<p class="NoIndent">魔法對你而言就如呼吸般自然。對你而言，<u>偵測魔法</u>法術將被視作戲法。</p></div>
<div class="Move"><h3 class="MoveName">人類</h3>
<p class="NoIndent">選擇一個牧師法術。你可以把它視作法師法術一樣施放。</p></div></div>

<div id="classmoves"><p class="Instructions">你起始還擁有以下動作：</p>
<div class="Move"><h3 class="BasicMoveName">法術書 (Spellbook)</h3>
<p class="NoIndent">
	你精通許多法術並將其抄寫進你的法術書中。你的法術書中起始寫有三個 等級1 的法術 和 三個戲法。每當你升級，將一個法術等級低於或等於你角色等級的法術加到法術書中。你的法術書有 <tag>1 重量</tag>。</p></div>

<div class="Move"><h3 class="BasicMoveName">準備法術 (Prepare Spells)</h3>
<p class="NoIndent">
	當你<strong>花費一段時間（一小時以上）不被打擾地安靜研究你的法術書</strong>，你將：</p>
<ul>
	<li>失去所有你已經準備好的法術。</li>
	<li>準備你所選擇的新法術，其等級總和不能超過你自身的等級+1。</li>
	<li>準備好你所有的戲法。戲法永遠不會被計入你的準備法術上限。</li></ul></div>

<div class="Move"><h3 class="BasicMoveName">施放法術(智力) (Cast a Spell)</h3>
<p class="NoIndent">
	當你<strong>施放一個你已經準備好的法術</strong>時，擲+智力：<br/>
	✴擲出10+時，該法術被成功施放，且你並未遺忘該法術，因此你之後仍可以再次施展該法術。<br/>
	✴擲出7-9時，該法術被施放，但你必須選擇一項：</p>
<ul>
	<li>你引來了不必要的注意、或將自己置身危險當中。GM會告訴你發生了什麼事。</li>
	<li>你施放法術的行為擾亂了現實世界的經緯──直到下次你進行準備法術動作之前，你的施放法術動作將獲得持續-1。</li>
	<li>在你施法後，該法術被你遺忘。直到你下次進行準備法術動作之前，你都無法再次施放該法術。</li></ul>
<p class="NoIndent">
	注意，維持一個帶有<tag>持續</tag>標籤的法術效果，有時會導致你在進行施放法術動作時承受減值。</p></div>

<div class="Move"><h3 class="BasicMoveName">法術防禦 (Spell Defense)</h3>
<p class="NoIndent">
	你可以立即終止任何你正在維持的持續性法術，並使用消散的法術能量來偏轉攻擊。該法術將因此終止，且你可以把對你造成的傷害減去等同該法術等級的數值。</p></div>

<div class="Move"><h3 class="BasicMoveName">儀式 (Ritual)</h3>
<p class="NoIndent">
	當你<strong>在能量匯聚之地繪製法陣來創造出魔法效果</strong>時，告訴GM你想要達成什麼樣的效果。所有儀式效果都是有可能實現的，但GM會要求你先達成下列一到四個條件：</p>
<ul>
	<li>這將需要花上數天／數周／數月的時間</li>
	<li>首先你必須要 ____</li>
	<li>你需要得到來自 ____ 的幫助</li>
	<li>這將需要大量的金錢</li>
	<li>你最多只能達成一個較差的版本，不可靠且效果有限</li>
	<li>你和你的同伴將需要冒著 ____ 的風險</li>
	<li>你需要驅除 ____ 的魔法效果才能做到。</li></ul></div></div></div>
<hr/>

<h2>陣營</h2>
<p class="InstructionsAfterHeader">選擇一個陣營：</p>
<div id="alignment"><div class="Move"><h3 class="MoveName">善良</h3>
<p class="NoIndent">使用魔法來直接幫助他人。</p></div>
<div class="Move"><h3 class="MoveName">中立</h3>
<p class="NoIndent">發掘某個與魔法奧秘有關的事物。</p></div>
<div class="Move"><h3 class="MoveName">邪惡</h3>
<p class="NoIndent">使用魔法來散佈恐怖與畏懼。</p></div></div>
<hr/>

<h2>裝備</h2>
<div id="gear"><p class="NoIndent">
	你的負載上限為 7+力量。<br/>
	你起始擁有 你的法術書(<tag>1 重量</tag>) 和 地城口糧 (<tag>5 使用次數</tag> <tag>1 重量</tag>)。</p>
選擇你的防具：
<ul>
	<li class="Option">皮甲 (<span class="Tags">1 護甲, 1 重量</span>)</li>
	<li class="Option">一袋書 (<span class="Tags">5 使用次數, 2 重量</span>) 和 3 治療藥水</li></ul>
選擇你的武器：
<ul>
	<li class="Option">匕首 (<span class="Tags">觸及, 1 重量</span>)</li>
	<li class="Option">法杖 (<span class="Tags">近身, 雙手, 1 重量</span>)</li></ul>
選擇一項：
<ul>
	<li class="Option">治療藥水 (<span class="Tags">0 重量</span>)</li>
	<li class="Option">3 解毒劑 (<span class="Tags">0 重量</span>)</li></ul></div>
<hr/>

<h2>羈絆</h2>
<div id="bonds"><p class="NoIndent">在至少一個欄位中填入你其中一名同伴的名字：</p>
<p>_______________ 將在即將到來的事件中扮演重要的角色。我已經預見了！</p>
<p>_______________ 對我隱瞞了一個重要的祕密。</p>
<p>_______________ 對這個世界有著可悲的誤解；我將盡我所能的教導他。</p></div>
<hr/>

<h2>進階動作</h2>
<div id="moves"><p class="InstructionsAfterHeader">當你的等級升至2~5，從下列動作中選擇。你同時在每次升級時將一個新的法術加到你的法術書中。</p>
<div class="Move"><h3 class="MoveName">奇才 (Prodigy)</h3>
<p class="NoIndent">
	選擇一個法術。當你準備該法術時，將該法術的等級視作比原本低一級。</p></div>

<div class="Move"><h3 class="MoveName">強效魔法 (Empowered Magic)</h3>
<p class="NoIndent">
	當你進行施展法術動作時，即使你擲出10+結果，你也可以選擇7-9結果的選項。如果你這麼做，你可以從下列效果中選擇一項：</p>
<ul>
	<li>該法術的效果最大化</li>
	<li>該法術影響的目標數量變為兩倍</li></ul></div>

<div class="Move"><h3 class="MoveName">知識之泉 (Fount of Knowledge)</h3>
<p class="NoIndent">
	當你<strong>針對沒有人知道的事物進行憶述見聞</strong>時，獲得 +1 加值。</p></div>

<div class="Move"><h3 class="MoveName">萬事通 (Know-It-All)</h3>
<p class="NoIndent">
	當<strong>其他玩家角色向你尋求建議，且你對他們說了你所能想到最好的意見</strong>，則當他們遵循你的建議行事時，他們獲得下次+1，且你標記一點經驗值。</p></div>

<div class="Move"><h3 class="MoveName">擴展法術書 (Expanded Spellbook)</h3>
<p class="NoIndent">
	從任意職業的法術列表中將一個法術加入到你的法術書中。</p></div>

<div class="Move"><h3 class="MoveName">附魔師 (Enchanter)</h3>
<p class="NoIndent">
	當你有充足的時間安全地研究一個魔法物品時，你可以向GM詢問它的效果，且GM會據實以告。</p></div>

<div class="Move"><h3 class="MoveName">邏輯思考 (Logical)</h3>
<p class="NoIndent">
	當你<strong>使用嚴謹的邏輯演繹去分析周遭環境</strong>時，你在進行審視現狀時可以使用智力來取代睿知。</p></div>

<div class="Move"><h3 class="MoveName">奧法防護 (Arcane Ward)</h3>
<p class="NoIndent">
	只要你還有至少一個準備好的一級或更高等級的法術，你獲得 +2 護甲值。</p></div>

<div class="Move"><h3 class="MoveName">反制法術 (Counterspell)</h3>
<p class="NoIndent">
	當你<strong>嘗試反制一個將要影響你的奧秘法術</strong>時，拿出一個你準備好的法術當做防禦的賭注，擲+智力：<br/>
	✴擲出10+時，該法術被反制，且不會對你產生任何影響。<br/>
	✴擲出7-9時，該法術被反制，但你也將遺忘你拿來當做賭注的法術。</p>
<p class="NoIndent">
	你的反制法術動作只會保護你自己；若被反制的法術有其他目標，則他們仍會受到該法術效果的影響。</p></div>

<div class="Move"><h3 class="MoveName">高速研究 (Quick Study)</h3>
<p class="NoIndent">
	當你<strong>看見一個奧秘法術的效果</strong>時，向GM詢問該法術的名稱以及效果。當你依據答案而採取行動時，你獲得 +1 加值。</p></div>


<p class="Instructions">當你的等級升至6~10，從下列動作或等級2~5的動作中選擇：</p>
<div class="Move"><h3 class="MoveName">宗師 (Master)</h3>
<p class="Requirement">需求: 奇才</p>
<p class="NoIndent">
	選擇一個法術（不能是你在奇才中所選的法術）。當你準備該法術時，將該法術的等級視作比原本低一級。</p></div>

<div class="Move"><h3 class="MoveName">高等強效魔法 (Greater Empowered Magic)</h3>
<p class="Requirement">取代: 強效魔法</p>
<p class="NoIndent">
	當你進行施展法術動作時，若擲出10-11，你可以選擇7-9結果中的選項。如果你這麼做，你可以從下列效果中選擇一項。若擲出12+，則你可以直接從下列效果中選擇一項：</p>
<ul>
	<li>該法術的效果變為兩倍</li>
	<li>該法術影響的目標數量變為兩倍</li></ul></div>

<div class="Move"><h3 class="MoveName">附魔師之魂 (Enchanter’s Soul)</h3>
<p class="Requirement">需求: 附魔師</p>
<p class="NoIndent">
	當你有充足的時間在能量匯聚之地安全地研究一個魔法物品時，你可以注魔強化該物品，讓你在下次使用它的時候使其效果增幅，GM會告訴你它被增幅後的確切效果。</p></div>

<div class="Move"><h3 class="MoveName">高等邏輯思考 (Highly Logical)</h3>
<p class="Requirement">取代: 邏輯思考</p>
<p class="NoIndent">
	當你<strong>使用嚴謹的邏輯演繹去分析周遭環境</strong>,時，你在進行審視現狀時可以使用智力來取代睿知。擲出12+時，你能夠詢問GM任意三個問題，這三個問題並不限於列表中的問題。</p></div>

<div class="Move"><h3 class="MoveName">奧法護甲 (Arcane Armor)</h3>
<p class="Requirement">取代: 奧法防護</p>
<p class="NoIndent">
	只要你還有至少一個準備好的一級或更高等級的法術，你獲得 +4 護甲值。</p></div>

<div class="Move"><h3 class="MoveName">防護性反制 (Protective Counter)</h3>
<p class="Requirement">需求: 反制法術</p>
<p class="NoIndent">
	當一個在你視線範圍內的同伴將要受到一個奧秘法術的影響時，你可以如同該法術將要影響你一樣反制它。若該法術會影響複數個同伴，則你必須分別為每個同伴進行反制。</p></div>

<div class="Move"><h3 class="MoveName">乙太繫鏈 (Ethereal Tether)</h3>
<p class="NoIndent">
	當你有充足的時間陪伴一名自願或無法抵抗的目標時，你可以打造一條與他相連乙太繫鏈。無論你與他之間的距離有多遠，你都能察覺到他所察覺的事物，且可以針對他們或他們周遭的環境進行審視現狀。自願連繫於你的目標可以透過這條繫鏈與你溝通，就彷彿你與他共處於同一個房間一樣。</p></div>

<div class="Move"><h3 class="MoveName">秘法操偶線 (Mystical Puppet Strings)</h3>
<p class="NoIndent">
	當你<strong>使用魔法控制某個人的行動</strong>時，他們不會留下任何你控制他們行動的相關記憶，也不會因此對你懷有惡意。</p></div>

<div class="Move"><h3 class="MoveName">法術增幅 (Spell Augmentation)</h3>
<p class="NoIndent">
	當你<strong>對一個生物造成傷害</strong>時，你可以將某個法術的能量全數灌注到他們身上──終止一個你正在維持的持續性法術，並將該法術的等級加到你所造成的傷害上。</p></div>

<div class="Move"><h3 class="MoveName">匯聚能量 (Self-Powered)</h3>
<p class="NoIndent">
	當你有充足的時間、奧法材料、並置身於一處安全的場所時，你可以打造出屬於你自己的能量匯聚之地。向GM描述你匯聚了什麼樣的能量、以及你是如何將其連結匯聚於這個場所，GM將會告訴你一種可能會對你的成果產生興趣的生物。</p></div></div>

      </div>
    </div>
 </div>
      
<div id="footer">
<div class="container">
   <p class="NoIndent"><a href="http://deepeningdays.com/dungeon-world-html-srd/">地城世界 Dungeon World HTML SRD</a> &copy; 2013，Andrew Codispoti。 <a href="http://dungeon-world.com">Dungeon World</a> 的版權由 Sage Kobold Productions 所有，
   <br><a href="http://creativecommons.org/licenses/by/3.0/">CC-BY</a>保留部分權利，詳見<a href="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/license/">版權頁</a>。</p>
</div>
</div>



    
    <script src="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/jquery.js"></script>
    
    <script src="https://hazmole.github.io/Dungeon-World-HTML-SRD-release/bootstrap/js/bootstrap.min.js"></script>
    <script>
      $("#sidemenu-topnav").addClass('currentul');
      $("#sidemenu").prepend("<h3>目錄</h3>");
      $("h2, h1, .MonsterName, .SpellName, .MagicItem, .ExtraLayer").each(function(i) {
          var current = $(this);
          current.attr("id", "title" + i);
          var tag = current.prop("tagName");
          
          var link_text = current.html();
          if(current.context.className=="MonsterName" || current.context.className=="SpellName"){
            link_text = link_text.replace(/\<span class=\"Tags\"\>.*\<\/span\>/g, "");
          }
          if(current.context.className=="MagicItem"){
            link_text = link_text.replace(/\<span class=\"Tags\"\>.*\<\/span\>/g, "");
            link_text = " - "+link_text;
          }

          
          const eng_text = link_text.match(/\((.*)\)/)? link_text.match(/\((.*)\)/)[1]: link_text;
          link_text = link_text.replace(/\(.*\)/, "");

          if(current.context.className=="ExtraLayer"){
            link_text = " - - "+link_text;
          }
          else if(tag=="H2" || tag=="H3"){
            link_text = " - "+link_text;
          }
          


          

          current.addClass('anchor');

          var link_html = `<li class='currentli ${tag=="H1"? "headli": ""}'><a id='link${i}' href='#title${i}' title='${eng_text}'>${link_text}</a></li>`;
          $("ul.currentul").append( link_html );
      });
      $(".Tags").each(function(i) {
        var current = $(this);
        var tags_arr = current.html().split(", ");
        current.html(""+tags_arr.map(function(tag){
            var className = "";
            tag = tag.trim();
            if(isRangeTag(tag))         className = "red";
            if(isSizeTag(tag))          className = "green";
            if(isOrganizationTag(tag))  className = "blue";
            if(isSpellLevelTag(tag))    className = "purple";
            return `<tag class="${className}">${tag}</tag>`;
          }).join(" "));
      });
      $("#names p").each(function(i) {
        var names_match = $(this).html().match(/(.+\: )?(.+)/);
        if( names_match == null || names_match.length<3 ) return ;
        
        var names_head = names_match[1]? names_match[1]: "";
        var names_arr = names_match[2].split(", ").map(context => {
          const name_match = context.match(/(.+)\(([\w-’ ]+)\)/);
          return name_match? `<n title="${name_match[2]}">${name_match[1]}</n>`: context;
        });

        $(this).html(names_head + names_arr.join(", "));
      });

      function isSpellLevelTag(tag){
        return (tag.match(/等級 \d+|禱念|戲法|Level \d+|Rote|Cantrip/))? true: false;
      }
      function isRangeTag(tag){
        return (tag.match(/觸及|近身|及遠|短程|遠程|Hand|Close|Reach|Near|Far/))? true: false;
      }
      function isSizeTag(tag){
        return (tag.match(/微型|小型|大型|巨型|Tiny|Small|Large|Huge/))? true: false;
      }
      function isOrganizationTag(tag){
        return (tag.match(/成群|集團|單獨|Horde|Group|Solitary/))? true: false;
      }
    </script>
  </body>
</html>
